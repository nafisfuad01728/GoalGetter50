<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archived Tasks</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="/static/icon.ico" rel="icon">
</head>
<body>
    <header>
        <div class="logo">GoalGetter50</div>
        <nav>
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('completed') }}">Completed</a>
            <a href="{{ url_for('archived') }}">Archived</a>
            <a href="{{ url_for('timer') }}">Timer</a>
            <a href="{{ url_for('notes') }}">Notes</a>
            <a href="{{ url_for('logout') }}" style="float: right;">Log Out</a>
        </nav>
    </header>
    <main>
        <h2>Archived Tasks</h2>
          <ul>
            {% for task in tasks %}
            {% if task.archived %}
            <li>
                <span class="archived">{{ task.task }}</span>
                <a href="{{ url_for('undo_task', task_id=task.id) }}">Undo</a>
                <a href="{{ url_for('delete_task', task_id=task.id) }}">Delete</a>
            </li>
            {% endif %}
            {% endfor %}
        </ul>
    </main>
    <footer>
        <div class="stats">
            <p>Total tasks: {{ tasks|length }}</p>
            <p>Completed tasks: {{ tasks|selectattr('completed', 'equalto', True)|list|length }}</p>
            <p>Remaining tasks: {{ tasks|selectattr('completed', 'equalto', False)|list|length }}</p>
        </div>
        <div class="theme-toggle">
            <label class="switch">
                <input type="checkbox" id="theme-switch">
                <span class="slider round"></span>
            </label>
            <span style="color: #4CAF50;">Dark Mode</span>
        </div>
        <div> <p style="color: #4CAF50;" >Â© <span id="year"></span> GoalGetter50. All rights reserved.</p> </div>
    </footer>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
        // Check for saved theme preference on page load
        window.onload = function() {
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-switch').checked = true; // Set the toggle to 'on'
            }
        };

        // Toggle dark mode
        document.getElementById('theme-switch').addEventListener('change', function() {
            document.body.classList.toggle('dark-mode');

            // Save the current theme preference
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
            } else {
                localStorage.setItem('darkMode', 'disabled');
            }
        });
    </script>
</body>
</html>
